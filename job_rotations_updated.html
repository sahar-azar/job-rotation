<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Rotations Overview</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: left;
        }
        th {
            background-color: #eee;
        }
        #rotationTable {
            display: none; /* Hide table initially */
        }
    </style>
</head>
<body>
    <h1>Job Rotations Overview</h1>

    <label for="weekSelect">Select Week:</label>
    <select id="weekSelect" onchange="updateTable()">
        <option value="">--Select a week--</option>
        <option value="42">Week 42 (October 14 - October 20)</option>
        <option value="43">Week 43 (October 21 - October 27)</option>
        <option value="44">Week 44 (October 28 - November 3)</option>
        <option value="45">Week 45 (November 4 - November 10)</option>
        <option value="46">Week 46 (November 11 - November 17)</option>
        <option value="47">Week 47 (November 18 - November 24)</option>
        <option value="48">Week 48 (November 25 - December 1)</option>
        <option value="49">Week 49 (December 2 - December 8)</option>
        <option value="50">Week 50 (December 9 - December 15)</option>
        <option value="51">Week 51 (December 16 - December 22)</option>
        <option value="52">Week 52 (December 23 - December 29)</option>
    </select>

    <div id="rotationTable">
        <h2>Job Rotation for Selected Week</h2>
        <table id="table">
            <tr>
                <th>Name</th>
                <th>Task</th>
            </tr>
            <!-- Data will be inserted here -->
        </table>
    </div>

    <script>
        const names = ["Henri", "Rauno", "Mark", "Marta", "Jihen", "Sahar"];
        const tasks = ["Unmapped nodes", "Traffic lights", "Crossing mid-stops", "Safety annotations", "Floater1", "Floater2"];

        // Week 42 assignments are hardcoded as the starting point.
        const week42 = {
            "Henri": "Unmapped nodes",
            "Rauno": "Traffic lights",
            "Mark": "Crossing mid-stops",
            "Marta": "Safety annotations",
            "Jihen": "Floater1",
            "Sahar": "Floater2"
        };

        // Rotation function that follows the correct pattern
        function getRotationForWeek(startingWeekData, weekNumber) {
            const rotations = [startingWeekData];

            // Process weeks starting from 43
            for (let week = 43; week <= weekNumber; week++) {
                const lastWeek = rotations[rotations.length - 1];
                const newWeek = {};
                
                // Rotate following the logic provided:
                newWeek["Henri"] = lastWeek["Sahar"];    // Henri gets Floater2 from Sahar
                newWeek["Rauno"] = lastWeek["Henri"];    // Rauno moves to Henri's task
                newWeek["Mark"] = lastWeek["Rauno"];     // Mark takes Rauno's task
                newWeek["Marta"] = lastWeek["Mark"];     // Marta takes Mark's task
                newWeek["Jihen"] = lastWeek["Marta"];    // Jihen takes Marta's task
                newWeek["Sahar"] = lastWeek["Jihen"];    // Sahar moves to Floater1

                rotations.push(newWeek);
            }

            return rotations[rotations.length - 1];
        }

        function updateTable() {
            const week = parseInt(document.getElementById('weekSelect').value);
            const table = document.getElementById('table');
            table.innerHTML = `
                <tr>
                    <th>Name</th>
                    <th>Task</th>
                </tr>
            `; // Reset table content

            if (week) {
                const weekData = week === 42 ? week42 : getRotationForWeek(week42, week);

                for (const name in weekData) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${name}</td><td>${weekData[name]}</td>`;
                    table.appendChild(row);
                }

                document.getElementById('rotationTable').style.display = 'block'; // Show the table
            } else {
                document.getElementById('rotationTable').style.display = 'none'; // Hide the table if no week is selected
            }
        }
    </script>
</body>
</html>
